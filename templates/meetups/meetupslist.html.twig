{% extends 'base.html.twig' %}

{% block title %}Hello MeetupFormController!{% endblock %}

{% block body %}
    <a href="{{ path('meetup_form') }}" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-300">
        New
    </a>
    {% for meetup in meetups %}
        <div class="meetup-item">
            <h3>{{ meetup.name }}</h3>
            <p>State: {{ meetup.state.label }}</p>

            {% if app.user == meetup.organizer or is_granted('ROLE_ADMIN') %}
                <form action="{{ path('meetup_update_state', {'id': meetup.id}) }}" method="POST">
                    <select name="state">
                        {% for state in states %}
                            <option value="{{ state.id }}" {% if state.id == meetup.state.id %}selected{% endif %}>
                                {{ state.label }}
                            </option>
                        {% endfor %}
                    </select>
                    <button type="submit" class="btn btn-primary">Update State</button>
                </form>
            {% endif %}
        </div>
    {% endfor %}

{% endblock %}
